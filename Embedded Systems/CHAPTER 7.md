### Timer Ports
##### Pulse Modulation
- This is one of the techniques used to convert analog signals into digital signals in which the instantaneous amplitude of an analog signal is represented by the width of periodic square wave.

- The **duty cycle** of a PWM signal represents the percentage of time a signal is "on" in each cycle, controlling the power delivered to a device like a light bulb. The formula for the duty cycle is D=τ/T ​, where τ is the "on" time, and 'T' is the total period of the cycle. 

- A higher duty cycle means more power is delivered, increasing brightness, while a lower duty cycle reduces power and dims the light. 
- The linear relationship for the duty cycle when controlling an analog signal is given by D=(Vsig−Vmin)/(Vmax−Vmin) where 'Vsig'​ is the signal voltage, and 'Vmin'​ and 'Vmax'​ are the minimum and maximum voltage limits. This linear relation is useful in applications like analog signal simulation, where PWM is used to simulate variable analog outputs in digital systems such as motor speed control or dimming LEDs based on voltage levels.

#### Applications of the Linear Relation:

- **Analog-to-Digital Conversion**: Simulating variable analog voltages in systems like audio volume control.
- **Power Management**: Dynamically adjusting power in devices like heaters or fans based on input voltage signals.
- **Signal Processing**: Controlling the output signal strength in communication systems or signal modulation.


### Demodulation
- Demodulation is the process of converting a square-wave signal (often created from pulse-width modulation, PWM) back into an analog value. This is achieved by using the widths of the pulses in the square wave to represent the signal's amplitude.

![[Pasted image 20241028093026.png]]

##### Low-Pass Filter :
- Shown above is the LPF as a circuit that allows low-frequency signals to pass through while blocking high-frequency components. In this case, it’s a simple RC (Resistor-Capacitor).
- The LPF helps smooth out the square-wave signal into a continuous waveform, approximating the original analog signal.
##### -3db Frequency (fh)
- Also known as the **cutoff frequency**, which is determined by the fh = 1/2πRC where R and C are defined in the diagram of the low pass filter shown above. 
- An approximation of the original analog signal can only be recovered when fm << fh << ft.

### Modulation
To approximate an analog signal with a digital microcontroller, a PWM (Pulse Width Modulation) waveform is generated by adjusting the duty cycle of a square wave, a process known as modulation. This allows an analog signal to modulate the square-wave carrier, producing a varying output voltage based on the duty cycle. PWM signals are typically generated using a timer module, where configuration registers set the waveform frequency and duty cycle.

On the ATmega328P microcontroller, PWM signals can be generated using two 8-bit timers and one 16-bit timer. These timers offer **Fast PWM** and **Phase-Correct PWM** modes, each with distinct characteristics that make them suitable for different applications.

#### Key Differences in PWM Modes

1. **Fast PWM Mode**:
    
    - In Fast PWM, the counter (TCNT) increments from 0 to a fixed value (TOP), usually 255, before resetting.
    - The output pin (OCxA or OCxB) remains high until TCNT matches the output compare register (OCRxA or OCRxB), at which point it switches low.
    - The period T=256/fclkT = 256/f_{clk}T=256/fclk​, and the counter resets at each cycle, making it faster than Phase-Correct PWM.
    - Fast PWM aligns the rising edges of multiple PWM outputs, useful for applications requiring a stable frequency.
    ![[Pasted image 20241108194344.png]]![[]]![[Pasted image 20241108194406.png]]
1. **Phase-Correct PWM Mode**:
    
    - In Phase-Correct PWM, the counter counts up to TOP and then back down to 0, producing a symmetrical waveform.
    - This up-down counting aligns the center of the pulses, resulting in smoother transitions and reduced high-frequency noise.
    - The period T=(2×255)/fclkT = (2 \times 255)/f_{clk}T=(2×255)/fclk​ is nearly double that of Fast PWM, offering less resolution but a cleaner signal.
    - Phase-Correct PWM is beneficial for applications like motor control, where smooth control and lower noise are essential.
    ![[Pasted image 20241108194602.png]]![[Pasted image 20241108194627.png]]
1. **Variable TOP Value with OCRA**:
    
    - Both Fast and Phase-Correct PWM modes can use a variable TOP value set by OCRA, effectively increasing the PWM frequency.
    - With this setup, only OCRB controls the duty cycle on the OCB pin, while OCA functionality is disabled.
    - This method provides fewer analog output levels but allows a significantly higher PWM frequency.

#### Practical Application of PWM Diagrams

The diagrams illustrate how these PWM modes control the output waveform. Fast PWM creates high-frequency, stable signals, while Phase-Correct PWM provides symmetrical, noise-reduced waveforms. Selecting between these modes depends on the desired frequency, smoothness, and noise tolerance required by the application

### INPUT CAPTURE (page 119)
